<!doctype html>
<html lang="en">

<head>

    <!--====== Required meta tags ======-->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>

    <!--====== Title ======-->
    <title>Checkout</title>

    <!--====== Favicon Icon ======-->
    <link rel="shortcut icon" href="images/favicon.png" type="image/png">

    <!--====== Slick css ======-->
    <link rel="stylesheet" href="css/slick.css">

    <!--====== Animate css ======-->
    <link rel="stylesheet" href="css/animate.css">

    <!--====== Nice Select css ======-->
    <link rel="stylesheet" href="css/nice-select.css">

    <!--====== Nice Number css ======-->
    <link rel="stylesheet" href="css/jquery.nice-number.min.css">

    <!--====== Magnific Popup css ======-->
    <link rel="stylesheet" href="css/magnific-popup.css">

    <!--====== Bootstrap css ======-->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!--====== Fontawesome css ======-->
    <link rel="stylesheet" href="css/font-awesome.min.css">

    <!--====== Default css ======-->
    <link rel="stylesheet" href="css/default.css">

    <!--====== Style css ======-->
    <link rel="stylesheet" href="css/style.css">

    <!--====== Responsive css ======-->
    <link rel="stylesheet" href="css/responsive.css">


</head>

<body>


<section id="count-down-part" class="bg_cover pt-70 pb-120" data-overlay="8"
         style="background-image: url(images/bg-2.jpg)">
    <div class="container">
        <div class="row align-items-center justify-content-center">
            <div class="col-lg-5 offset-lg-1 col-md-8">
                <div class="category-form category-form-3 pt-50">
                    <div class="form-title text-center">
                        <h4 id="course-info"></h4>
                    </div>
                    <div class="main-form">
                        <form action="#">
                            <div class="singel-form">
                                <input type="email" placeholder="Your Email" id="email" required>
                            </div>
                            <div class="singel-form">
                                <button class="main-btn" type="button" onclick="sendBuy()">Order</button>
                            </div>
                            <div class="singel-form">
                                <a id="back" href='events-singel.html?eventId=${courseId}'  class="main-btn">Back</a>
                            </div>
                        </form>
                        <input type="hidden" id="hiddenVar"/>
                    </div>
                </div>
            </div>
        </div> <!-- row -->
    </div><!-- container -->

</section>
<script>
    // Get the query parameters from the URL
    const urlParams = new URLSearchParams(window.location.search);
    const eventId = urlParams.get('eventId');
    const courseInfo = document.getElementById('course-info');


    console.log("eventId="+eventId+' '+'name= '+name +'price= '+price)
    const backHref = document.getElementById('back');
    backHref.href=`event-singel.html?eventId=${eventId}`;
</script>
<script>
    let status1;

    function sendBuy() {
        console.log(eventId);
        fetch('http://localhost:8080/api/event/order/'+eventId, {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                email: document.getElementById("email").value,
            })
        })
            .then(response => {
                status1 = response.status;
                // console.log(response);
                return  response.json();
            })
            .then((data) => {
                console.log(data)
                console.log(data.data)
                console.log(data)
                console.log(data.status)
                if (status1 === 200){
                    if (data.data!==null){
                        window.location.replace('events-singel.html?eventId='+eventId)
                    }
                } else {
                    alert('emailingizni  noto\'g\'ri kiritdingiz');
                }

            })
            .catch(error => console.error(error));
    }

</script>
<!--====== jquery js ======-->
<script src="js/vendor/modernizr-3.6.0.min.js"></script>
<script src="js/vendor/jquery-1.12.4.min.js"></script>

<!--====== Bootstrap js ======-->
<script src="js/bootstrap.min.js"></script>

<!--====== Slick js ======-->
<script src="js/slick.min.js"></script>

<!--====== Magnific Popup js ======-->
<script src="js/jquery.magnific-popup.min.js"></script>

<!--====== Counter Up js ======-->
<script src="js/waypoints.min.js"></script>
<script src="js/jquery.counterup.min.js"></script>

<!--====== Nice Select js ======-->
<script src="js/jquery.nice-select.min.js"></script>

<!--====== Nice Number js ======-->
<script src="js/jquery.nice-number.min.js"></script>

<!--====== Count Down js ======-->
<script src="js/jquery.countdown.min.js"></script>

<!--====== Validator js ======-->
<script src="js/validator.min.js"></script>

<!--====== Ajax Contact js ======-->
<script src="js/ajax-contact.js"></script>

<!--====== Main js ======-->
<script src="js/main.js"></script>

<!--====== Map js ======-->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDC3Ip9iVC0nIxC6V14CKLQ1HZNF_65qEQ"></script>
<script src="js/map-script.js"></script>

</body>

</html>
