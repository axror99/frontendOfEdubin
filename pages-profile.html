<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5">
    <meta name="author" content="AdminKit">
    <meta name="keywords"
          content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="shortcut icon" href="img-admin/icons/icon-48x48.png"/>

    <link rel="canonical" href="https://demo-basic.adminkit.io/pages-profile.html"/>

    <title>Profile | AdminKit Demo</title>

    <link href="css-admin/app.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">


    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        body {
            color: #566787;
            background: #f5f5f5;
            font-family: 'Varela Round', sans-serif;
            font-size: 13px;
        }

        .table-responsive {
            margin: 30px 0;
        }

        .table-wrapper {
            min-width: 1000px;
            background: #fff;
            padding: 20px 25px;
            border-radius: 3px;
            box-shadow: 0 1px 1px rgba(0, 0, 0, .05);

        }

        .table-title {
            padding-bottom: 15px;
            background: #435d7d;
            color: #fff;
            padding: 16px 30px;
            margin: -20px -25px 10px;
            border-radius: 3px 3px 0 0;
        }

        .table-title h2 {
            margin: 5px 0 0;
            font-size: 24px;
        }

        .table-title .btn-group {
            float: right;
        }

        .table-title .btn {
            color: #fff;
            float: right;
            font-size: 13px;
            border: none;
            min-width: 50px;
            border-radius: 2px;
            border: none;
            outline: none !important;
            margin-left: 10px;
        }

        .table-title .btn i {
            float: left;
            font-size: 21px;
            margin-right: 5px;
        }

        .table-title .btn span {
            float: left;
            margin-top: 2px;
        }

        table.table tr th, table.table tr td {
            border-color: #e9e9e9;
            padding: 12px 70px;
            vertical-align: middle;
        }

        table.table tr th:first-child {
            width: 60px;
        }

        table.table tr th:last-child {
            width: 100px;
        }

        table.table-striped tbody tr:nth-of-type(odd) {
            background-color: #fcfcfc;
        }

        table.table-striped.table-hover tbody tr:hover {
            background: #f5f5f5;
        }

        table.table th i {
            font-size: 13px;
            margin: 0 5px;
            cursor: pointer;
        }

        table.table td:last-child i {
            opacity: 0.9;
            font-size: 22px;
            margin: 0 5px;
        }

        table.table td a {
            font-weight: bold;
            color: #566787;
            display: inline-block;
            text-decoration: none;
            outline: none !important;
        }

        table.table td a:hover {
            color: #2196F3;
        }

        table.table td a.edit {
            color: #FFC107;
        }

        table.table td a.delete {
            color: #F44336;
        }

        table.table td i {
            font-size: 19px;
        }

        table.table .avatar {
            border-radius: 50%;
            vertical-align: middle;
            margin-right: 10px;
        }

        .pagination {
            float: right;
            margin: 0 0 5px;
        }

        .pagination li a {
            border: none;
            font-size: 13px;
            min-width: 30px;
            min-height: 30px;
            color: #999;
            margin: 0 2px;
            line-height: 30px;
            border-radius: 2px !important;
            text-align: center;
            padding: 0 6px;
        }

        .pagination li a:hover {
            color: #666;
        }

        .pagination li.active a, .pagination li.active a.page-link {
            background: #03A9F4;
        }

        .pagination li.active a:hover {
            background: #0397d6;
        }

        .pagination li.disabled i {
            color: #ccc;
        }

        .pagination li i {
            font-size: 16px;
            padding-top: 6px
        }

        .hint-text {
            float: left;
            margin-top: 10px;
            font-size: 13px;
        }

        /* Custom checkbox */
        .custom-checkbox {
            position: relative;
        }

        .custom-checkbox input[type="checkbox"] {
            opacity: 0;
            position: absolute;
            margin: 5px 0 0 3px;
            z-index: 9;
        }

        .custom-checkbox label:before {
            width: 18px;
            height: 18px;
        }

        .custom-checkbox label:before {
            content: '';
            margin-right: 10px;
            display: inline-block;
            vertical-align: text-top;
            background: white;
            border: 1px solid #bbb;
            border-radius: 2px;
            box-sizing: border-box;
            z-index: 2;
        }

        .custom-checkbox input[type="checkbox"]:checked + label:after {
            content: '';
            position: absolute;
            left: 6px;
            top: 3px;
            width: 6px;
            height: 11px;
            border: solid #000;
            border-width: 0 3px 3px 0;
            transform: inherit;
            z-index: 3;
            transform: rotateZ(45deg);
        }

        .custom-checkbox input[type="checkbox"]:checked + label:before {
            border-color: #03A9F4;
            background: #03A9F4;
        }

        .custom-checkbox input[type="checkbox"]:checked + label:after {
            border-color: #fff;
        }

        .custom-checkbox input[type="checkbox"]:disabled + label:before {
            color: #b8b8b8;
            cursor: auto;
            box-shadow: none;
            background: #ddd;
        }

        /* Modal styles */
        .modal .modal-dialog {
            max-width: 400px;
        }

        .modal .modal-header, .modal .modal-body, .modal .modal-footer {
            padding: 20px 30px;
        }

        .modal .modal-content {
            border-radius: 3px;
        }

        .modal .modal-footer {
            background: #ecf0f1;
            border-radius: 0 0 3px 3px;
        }

        .modal .modal-title {
            display: inline-block;
        }

        .modal .form-control {
            border-radius: 2px;
            box-shadow: none;
            border-color: #dddddd;
        }

        .modal textarea.form-control {
            resize: vertical;
        }

        .modal .btn {
            border-radius: 2px;
            min-width: 100px;
        }

        .modal form label {
            font-weight: normal;
        }
    </style>
</head>

<body>
<div class="wrapper">
    <nav id="sidebar" class="sidebar js-sidebar">
        <div class="sidebar-content js-simplebar">
            <a class="sidebar-brand" href="sideBar.html">
                <span class="align-middle">AdminKit</span>
            </a>

            <ul class="sidebar-nav">
                <li class="sidebar-header">
                </li>

                <li class="sidebar-item">
                    <a class="sidebar-link" href="crud-category.html">
                        <i class="align-middle" data-feather="book"></i> <span class="align-middle">Categories</span>
                    </a>
                </li>

                <li class="sidebar-item">
                    <a class="sidebar-link" href="crud-courses.html">
                        <i class="align-middle" data-feather="coffee"></i> <span class="align-middle">Courses</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="crud-events.html">
                        <i class="align-middle" data-feather="check-square"></i> <span
                            class="align-middle">Events</span>
                    </a>
                </li>

                <li class="sidebar-item">
                    <a class="sidebar-link" href="crud-blogs.html">
                        <i class="align-middle" data-feather="align-left"></i> <span
                            class="align-middle">Blogs</span>
                    </a>
                </li>


                <li class="sidebar-item active">
                    <a class="sidebar-link" href="pages-profile.html">
                        <i class="align-middle" data-feather="user"></i> <span class="align-middle">Employees</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="sideBar.html">
                        <i class="align-middle" data-feather="sliders"></i> <span class="align-middle">Dashboard</span>
                    </a>
                </li>

                <li class="sidebar-item">
                    <a class="sidebar-link" href="pages-sign-in.html">
                        <i class="align-middle" data-feather="log-in"></i> <span class="align-middle">Sign In</span>
                    </a>
                </li>

                <li class="sidebar-item">
                    <a class="sidebar-link" href="pages-sign-up.html">
                        <i class="align-middle" data-feather="user-plus"></i> <span class="align-middle">Sign Up</span>
                    </a>
                </li>

                <li class="sidebar-header">
                </li>

                <li class="sidebar-item">
                    <a class="sidebar-link" href="ui-buttons.html">
                        <i class="align-middle" data-feather="square"></i> <span class="align-middle">Buttons</span>
                    </a>
                </li>

                <li class="sidebar-item">
                    <a class="sidebar-link" href="ui-cards.html">
                        <i class="align-middle" data-feather="grid"></i> <span class="align-middle">Cards</span>
                    </a>
                </li>

                <li class="sidebar-header">
                </li>

                <li class="sidebar-item">
                    <a class="sidebar-link" href="charts-chartjs.html">
                        <i class="align-middle" data-feather="bar-chart-2"></i> <span class="align-middle">Charts</span>
                    </a>
                </li>

                <li class="sidebar-item">
                    <a class="sidebar-link" href="maps-google.html">
                        <i class="align-middle" data-feather="map"></i> <span class="align-middle">Maps</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="main">
        <nav class="navbar navbar-expand navbar-light navbar-bg">
            <a class="sidebar-toggle js-sidebar-toggle">
                <i class="hamburger align-self-center"></i>
            </a>
        </nav>

        <main class="content">
            <div class="container">
                <div class="table-responsive">
                    <div class="table-wrapper">
                        <div class="table-title">
                            <div class="row">
                                <div class="col-xs-6">
                                    <h2>Manage <b>Employees</b></h2>
                                </div>
                                <div class="col-xs-6">
                                    <a href="#addEmployee" class="btn btn-success" data-toggle="modal"><i
                                            class="material-icons">&#xE147;</i> <span>Add New Employee</span></a>
                                </div>
                            </div>
                        </div>
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Permission</th>
                                <th>actions</th>
                            </tr>
                            </thead>
                            <tbody id="foreach">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
        <div id="addEmployee" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="addId">
                        <div class="modal-header">
                            <h4 class="modal-title">Add Employee</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Picture</label>
                                <input type="file" id="myFile" name="myfile">
                                <label>Name</label>
                                <input id="name" type="text" class="form-control" required>
                                <label>username</label>
                                <input id="username" type="text" class="form-control" required>
                                <label>password</label>
                                <input id="password" type="text" class="form-control" required>
                                <label>email</label>
                                <input id="email" type="email" class="form-control" required>
                                <label>profession</label>
                                <input id="profession" type="email" class="form-control" required>
                                <label>about</label>
                                <input id="about" type="email" class="form-control" required>
                                <label>achievement</label>
                                <input id="achievement" type="email" class="form-control" required>
                                <label>myObjective</label>
                                <input id="myObjective" type="email" class="form-control" required>
                                <label>birthday</label>
                                <input id="birthday" type="text" class="form-control" required placeholder="2023-06-23">
                                <div class="form-group">
                                    <label>Roles</label>
                                    <br/>
                                    <input type="checkbox" name="rolesList" value="ADMIN"/> Admin
                                    <br/>
                                    <input type="checkbox" name="rolesList" value="USER"/> User
                                    <br/>
                                    <input type="checkbox" name="rolesList" value="TEACHER"/> Teacher
                                </div>
                                <div class="form-group">
                                    <label>Permission</label>
                                    <br/>
                                    <input type="checkbox" name="permission" value="ADD"/> Add
                                    <br>
                                    <input type="checkbox" name="permission" value="READ"/> Read
                                    <br>
                                    <input type="checkbox" name="permission" value="UPDATE"/> Update
                                    <br>
                                    <input type="checkbox" name="permission" value="DELETE"/> Delete
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                            <input type="submit" class="btn btn-success" value="Add" onclick="addEmployee()">
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Edit Modal HTML -->
        <div id="editEmployee" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form>
                        <div class="modal-header">
                            <h4 class="modal-title">Edit Category</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Picture</label>
                                <input type="file" id="myFile1" name="myfile">
                                <label>Name</label>
                                <input id="name1" type="text" class="form-control">
                                <label>username</label>
                                <input id="username1" type="text" class="form-control">
                                <label>password</label>
                                <input id="password1" type="text" class="form-control" >
                                <label>email</label>
                                <input id="email1" type="email" class="form-control" >
                                <label>profession</label>
                                <input id="profession1" type="email" class="form-control">
                                <label>about</label>
                                <input id="about1" type="email" class="form-control">
                                <label>achievement</label>
                                <input id="achievement1" type="email" class="form-control" >
                                <label>myObjective</label>
                                <input id="myObjective1" type="email" class="form-control">
                                <label>birthday</label>
                                <input id="birthday1" type="text" class="form-control"  placeholder="2023-06-23">
                                <div class="form-group">
                                    <label>Roles</label>
                                    <br/>
                                    <input type="checkbox" name="rolesList" value="ADMIN"/> Admin
                                    <br/>
                                    <input type="checkbox" name="rolesList" value="USER"/> User
                                    <br/>
                                    <input type="checkbox" name="rolesList" value="TEACHER"/> Teacher
                                </div>
                                <div class="form-group">
                                    <label>Permission</label>
                                    <br/>
                                    <input type="checkbox" name="permission" value="ADD"/> Add
                                    <br>
                                    <input type="checkbox" name="permission" value="READ"/> Read
                                    <br>
                                    <input type="checkbox" name="permission" value="UPDATE"/> Update
                                    <br>
                                    <input type="checkbox" name="permission" value="DELETE"/> Delete
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                            <input type="submit" class="btn btn-info" value="Save" onclick="updateEmployee()">
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div id="deleteEmployee" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form>
                        <div class="modal-header">
                            <h4 class="modal-title">Delete Employee</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        </div>
                        <div class="modal-body">
                            <p>Are you sure you want to delete this category?</p>
                            <p class="text-warning"><small>This action cannot be undone.</small></p>
                        </div>
                        <div class="modal-footer">
                            <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                            <input type="submit" class="btn btn-danger" value="Delete" onclick="deleteEmployee()">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="js-admin/app.js"></script>

</body>
<script>
    fetch('http://localhost:8080/api/employee/list')
    .then(data=>data.json())
    .then((dataJson)=>{
        console.log(dataJson.data);

        let myBody = document.getElementById('foreach');

        for (key in dataJson.data){
            let human = dataJson.data[key];
            const tr = document.createElement("tr");
            const td1 = document.createElement("td");
            td1.textContent = human.name;

            const td2 = document.createElement("td");
            td2.textContent = human.email;

            const td3 = document.createElement("td");
            const select1 = document.createElement("select");
            const option1 = document.createElement("option");
            option1.textContent = "--";
            select1.appendChild(option1);
            for (key1 in human.roles){

                let humanRole = human.roles[key1];
                const option2 = document.createElement("option");
                option2.textContent = humanRole;
                select1.appendChild(option2);

            }

            const label1 = document.createElement("label");
            label1.appendChild(select1);
            td3.appendChild(label1);

            const td4 = document.createElement("td");
            const select2 = document.createElement("select");
            const option4 = document.createElement("option");
            option4.textContent = "--";
            select2.appendChild(option4);
            for (key2 in human.permission){

                let humanPermission = human.permission[key2];
                const option11 = document.createElement("option");
                option11.textContent = humanPermission;
                select2.appendChild(option11);

            }
            const label2 = document.createElement("label");
            label2.appendChild(select2);
            td4.appendChild(label2);

            const td5 = document.createElement("td");
            const editLink = document.createElement("a");
            editLink.href = "#editEmployee";
            editLink.classList.add("edit");
            editLink.setAttribute("data-toggle", "modal");
            const editIcon = document.createElement("i");
            editIcon.classList.add("material-icons");
            editIcon.setAttribute("data-toggle", "tooltip");
            editIcon.setAttribute("title", "Edit");
            editIcon.onclick = function() {
                submitButton(human.id);
            };
            editIcon.textContent = "\uE254";
            editLink.appendChild(editIcon);
            const deleteLink = document.createElement("a");
            deleteLink.href = "#deleteEmployee";
            deleteLink.classList.add("delete");
            deleteLink.setAttribute("data-toggle", "modal");
            const deleteIcon = document.createElement("i");
            deleteIcon.classList.add("material-icons");
            deleteIcon.setAttribute("data-toggle", "tooltip");
            deleteIcon.setAttribute("title", "Delete");
            deleteIcon.onclick = function() {
                submitButton(human.id);
            };
            deleteIcon.textContent = "\uE872";
            deleteLink.appendChild(deleteIcon);
            td5.appendChild(editLink);
            td5.appendChild(deleteLink);

            tr.appendChild(td1);
            tr.appendChild(td2);
            tr.appendChild(td3);
            tr.appendChild(td4);
            tr.appendChild(td5);
            myBody.appendChild(tr);
        }

    })
    .catch(err=>console.log(err))
</script>
<script>

    function addEmployee() {

        let checkboxes = document.getElementsByName("permission");
        let selectedValues = [];
        for (let i = 0; i < checkboxes.length; i++) {
            if (checkboxes[i].checked) {
                selectedValues.push(checkboxes[i].value);
            }
        }
        let checkboxes2 = document.getElementsByName("rolesList");
        let selectedValues2 = [];
        for (let i = 0; i < checkboxes2.length; i++) {
            if (checkboxes2[i].checked) {
                selectedValues2.push(checkboxes2[i].value);
            }
        }
        let token = localStorage.getItem('access_token');
        const formData = new FormData();
        formData.append("name", document.getElementById("name").value);
        formData.append("username", document.getElementById("username").value);
        formData.append("password", document.getElementById("password").value);
        formData.append("email", document.getElementById("email").value);
        formData.append("birthday", document.getElementById("birthday").value);
        formData.append("picture", document.getElementById("myFile").files[0]);
        formData.append("profession", document.getElementById("profession").value);
        formData.append("about", document.getElementById("about").value);
        formData.append("achievement", document.getElementById("achievement").value);
        formData.append("myObjective", document.getElementById("myObjective").value);
        formData.append("roles", selectedValues2);
        formData.append("permissionList", selectedValues);
        // body: JSON.stringify({
        //     name: document.getElementById("name").value,
        //     username: document.getElementById("username").value,
        //     password: document.getElementById("password").value,
        //     email: document.getElementById("email").value,
        //     birthday: document.getElementById("birthday").value,
        //     roles: selectedValues2,
        //     permissionList: selectedValues,
        //     picture:document.getElementById("myFile").files[0]
        // })
        fetch('http://localhost:8080/api/employee/add',{
                method:"POST",
                headers: {
                    'authorization': token
                },
            body: formData

            })
                .then((dataJson)=>{
                    console.log(dataJson.data)
                    console.log(dataJson.status)
                    // event.preventDefault();
                })
                .catch(err=>console.log(err))
        }
        let employeeId = "";

        function submitButton(id) {
            console.log(id)
            employeeId = id;
        }
        function updateEmployee() {
            let checkboxes = document.getElementsByName("permission");
            let selectedValues = [];
            for (let i = 0; i < checkboxes.length; i++) {
                if (checkboxes[i].checked) {
                    selectedValues.push(checkboxes[i].value);
                }
            }
            let checkboxes2 = document.getElementsByName("rolesList");
            let selectedValues2 = [];
            for (let i = 0; i < checkboxes2.length; i++) {
                if (checkboxes2[i].checked) {
                    selectedValues2.push(checkboxes2[i].value);
                }
            }
            let token = localStorage.getItem('access_token');
            const formData = new FormData();
            formData.append("name", document.getElementById("name1").value);
            formData.append("username", document.getElementById("username1").value);
            formData.append("password", document.getElementById("password1").value);
            formData.append("email", document.getElementById("email1").value);
            formData.append("birthday", document.getElementById("birthday1").value);
            formData.append("picture", document.getElementById("myFile1").files[0]);
            formData.append("profession", document.getElementById("profession1").value);
            formData.append("about", document.getElementById("about").value);
            formData.append("achievement", document.getElementById("achievement").value);
            formData.append("myObjective", document.getElementById("myObjective").value);
            formData.append("roles", selectedValues2);
            formData.append("permissionList", selectedValues);
            fetch('http://localhost:8080/api/employee/update/' + employeeId, {
                method: "PUT",
                headers: {
                    'authorization': token
                },
                body: formData
            })
                .then((dataJson) => {
                    console.log(dataJson.data)
                })
                .catch(err => console.log(err))
        }

        function deleteEmployee() {
            let token = localStorage.getItem('access_token');
            fetch('http://localhost:8080/api/employee/delete/' + employeeId, {
                method: "DELETE",
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'authorization': token
                },
            })
                .then(data => data.json())
                .then((dataJson) => {
                    console.log(dataJson.data)
                    if (dataJson.status===403 || dataJson.status===401){
                        alert("token time is expired")
                        window.location.replace('login.html');
                    }
                })
                .catch(err => console.log(err))
        }

</script>

</html>